<!DOCTYPE html>
<html lang='en'>
	<head>
		<meta charset='UTF-8' />
		<meta name='viewport' content='width=device-width, initial-scale=1.0' />
		<meta name="description" content="سنرد على طلبك فورا" />
		<meta property="og:title" content="تواصل معنا" />
		<meta property="og:description" content="سنرد على طلبك فورا" />
		<meta property="og:type" content="website" />
		<meta property="og:image" content="/static/og_image.png" />
		<link rel='icon' type='image/png' href='https://n8n.io/favicon.ico' />
		<link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
		<title>تواصل معنا</title>
		<style>
			:root {
				/* Fonts */
				--font-family: "Open Sans", sans-serif;
				--font-size-body: 12px;
				--font-size-label: 14px;
				--font-size-test-notice: 12px;
				--font-size-input: 14px;
				--font-size-header: 20px;
				--font-size-paragraph: 14px;
				--font-size-link: 12px;
				--font-size-error: 12px;
				--font-size-html-h1: 28px;
				--font-size-html-h2: 20px;
				--font-size-html-h3: 16px;
				--font-size-html-h4: 14px;
				--font-size-html-h5: 12px;
				--font-size-html-h6: 10px;

				/* Colors */
				--color-background: #fbfcfe;
				--color-test-notice-text: #e6a23d;
				--color-test-notice-bg: #fefaf6;
				--color-test-notice-border: #f6dcb7;
				--color-card-bg: #ffffff;
				--color-card-border: #dbdfe7;
				--color-card-shadow: rgba(99, 77, 255, 0.06);
				--color-link: #7e8186;
				--color-header: #525356;
				--color-label: #555555;
				--color-input-border: #dbdfe7;
				--color-input-text: #71747A;
				--color-input-bg: #ffffff;
				--color-focus-border: rgb(90, 76, 194);
				--color-submit-btn-bg: #ff6d5a;
				--color-submit-btn-text: #ffffff;
				--color-error: #ea1f30;
				--color-required: #ff6d5a;
				--color-clear-button-bg: #7e8186;
				--color-html-text: #555;
				--color-html-link: #FF6D5A;

				/* Border Radii */
				--border-radius-card: 8px;
				--border-radius-input: 6px;
				--border-radius-clear-btn: 50%;

				/* Spacing */
				--padding-container-top: 24px;
				--padding-card: 24px;
				--padding-test-notice-vertical: 12px;
				--padding-test-notice-horizontal: 24px;
				--margin-bottom-card: 16px;
				--padding-form-input: 12px;

				/* Dimensions */
				--container-width: 448px;
				--submit-btn-height: 48px;
				--checkbox-size: 18px;

				/* Others */
				--box-shadow-card: 0px 4px 16px 0px var(--color-card-shadow);
				--opacity-placeholder: 0.5;
			}

			*,
			::after,
			::before {
				box-sizing: border-box;
				margin: 0;
				padding: 0;
			}

			body {
				font-family: var(--font-family);
				font-weight: 400;
				font-size: var(--font-size-body);
				display: flex;
				flex-direction: column;
				justify-content: start;
				background-color: var(--color-background);
			}

			.container {
				margin: auto;
				text-align: center;
				padding-top: var(--padding-container-top);
				width: var(--container-width);
			}

			.test-notice {
				padding: var(--padding-test-notice-vertical) var(--padding-test-notice-horizontal);
				color: var(--color-test-notice-text);
				background-color: var(--color-test-notice-bg);
				border-radius: var(--border-radius-card);
				border: 1px solid var(--color-test-notice-border);
				font-size: var(--font-size-test-notice);
				font-weight: 400;
				line-height: 16px;
				text-align: left;
				margin-bottom: var(--margin-bottom-card);
			}

			.card {
				padding: var(--padding-card);
				background-color: var(--color-card-bg);
				border: 1px solid var(--color-card-border);
				border-radius: var(--border-radius-card);
				box-shadow: var(--box-shadow-card);
				margin-bottom: var(--margin-bottom-card);
			}

			.n8n-link {
				padding-bottom: var(--padding-container-top);
			}
			.n8n-link a {
				color: var(--color-link);
				font-weight: 600;
				font-size: var(--font-size-link);
				text-decoration: none;
			}

			.n8n-link svg {
				display: inline-block;
				vertical-align: middle;
			}

			.form-header h1 {
				color: var(--color-header);
				font-size: var(--font-size-header);
				font-weight: 400;
			}

			.form-header p {
				padding-top: 8px;
				color: var(--color-link);
				font-size: var(--font-size-paragraph);
				font-weight: 400;
			}

			.inputs-wrapper {
				padding-top: var(--padding-container-top);
				padding-bottom: var(--padding-container-top);
			}

			form label {
				display: block;
				text-align: left;
				font-size: var(--font-size-label);
				font-weight: 600;
				color: var(--color-label);
				padding-bottom: 6px;
			}

			form textarea {
				max-width: 100%;
			}

			form .form-input {
				border: 1px solid var(--color-input-border);
				border-radius: var(--border-radius-input);
				width: 100%;
				font-size: var(--font-size-input);
				color: var(--color-input-text);
				background-color: var(--color-input-bg);
				font-weight: 400;
				padding: var(--padding-form-input);
			}

			form textarea:focus,
			form input:focus {
				outline: none;
				border-color: var(--color-focus-border);
			}

			.select-input {
				border: 1px solid var(--color-input-border);
				border-radius: var(--border-radius-input);
			}

			.select-input:focus-within {
				border: 1px solid var(--color-focus-border);
			}

			form select {
				outline: transparent;
				border: none;
				border-radius: var(--border-radius-input);
				width: 100%;
				font-size: var(--font-size-input);
				color: var(--color-input-text);
				font-weight: 400;
				background-color: var(--color-card-bg);
				padding: var(--padding-form-input);
				border-right: 12px solid transparent;
			}

			input[type='date'] {
				font-family: var(--font-family);
			}

			::placeholder {
				opacity: var(--opacity-placeholder);
			}

			#submit-btn {
				width: 100%;
				height: var(--submit-btn-height);
				padding: var(--padding-form-input);
				border-radius: var(--border-radius-input);
				border: 0;
				font-size: var(--font-size-input);
				font-weight: 600;
				font-family: var(--font-family);
				background-color: var(--color-submit-btn-bg);
				color: var(--color-submit-btn-text);
				cursor: pointer;
			}

			#submit-btn span {
				padding-right: 6px;
				display: none;
			}

			#submit-btn span svg {
				display: inline-block;
				vertical-align: middle;
				fill: var(--color-submit-btn-text);
				animation: lds-ring 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
			}

			@keyframes lds-ring {
				0% {
					transform: rotate(0deg);
				}
				100% {
					transform: rotate(360deg);
				}
			}

			#submit-btn:hover {
				opacity: 0.7;
			}

			.error-hidden {
				display: block;
				position: relative;
				color: var(--color-error);
				text-align: left;
				font-size: var(--font-size-error);
				font-weight: 400;
				visibility: hidden;
				padding-top: 6px;
				padding-bottom: 9px;
			}

			.error-show {
				visibility: visible;
			}

			/* multiselect ----------------------------------- */
			.multiselect {
				padding-left: 6px;
				padding-right: 6px;
			}

			.multiselect-option {
				padding-top: 6px;
				display: flex;
			}

			.multiselect-option label {
				padding-left: 12px;
				color: var(--color-link);
				font-weight: 400;
				cursor: pointer;
			}

			.multiselect-checkbox {
				vertical-align: middle;
				min-width: var(--checkbox-size);
			}

			input[type='checkbox'] {
				appearance: none;
				width: var(--checkbox-size);
				height: var(--checkbox-size);
				border: 1px solid var(--color-input-border);
				border-radius: 3px;
				cursor: pointer;
				position: relative;
			}
			.multiselect-checkbox:checked {
				background: var(--color-focus-border);
				border-color: var(--color-focus-border);
			}
			.multiselect-checkbox:checked::after {
				content: '✔';
				position: absolute;
				top: 50%;
				left: 50%;
				transform: translate(-50%, -50%);
				color: white;
				font-size: var(--font-size-label);
				font-weight: bold;
			}

			.multiselect[data-radio-select] .multiselect-checkbox {
				border-radius: 50%;
				width: var(--checkbox-size);
				height: var(--checkbox-size);
				display: flex;
				align-items: center;
				justify-content: center;
			}

			.multiselect[data-radio-select] .multiselect-checkbox:checked {
				background: white;
				border-color: var(--color-focus-border);
				border-width: 4px;
				border-radius: 50%;
			}
			.multiselect[data-radio-select] .multiselect-checkbox:checked::after {
				content: '';
			}
			/* required field ----------------------------- */
			.form-required {
			}
			label.form-required::after {
				content: ' *';
				color: var(--color-required);
			}

			hr {
				border: 0;
				height: 1px;
				border-top: 1px solid var(--color-input-border);
				margin-top: 24px;
				margin-bottom: 24px;
				display: none;
			}

			.file-input-wrapper {
				position: relative;
				display: inline-block;
				width: 100%;
			}
			input[type="file"] {
			}
			.clear-button {
				position: absolute;
				right: 5px;
				top: 50%;
				transform: translateY(-65%);
				background-color: var(--color-clear-button-bg);
				border: none;
				border-radius: var(--border-radius-clear-btn);
				font-size: 14px;
				font-weight: 600;
				font-family: var(--font-family);
				color: white;
				width: 20px;
				height: 20px;
				text-align: center;
				line-height: 20px;
				cursor: pointer;
				display: none;
			}
			input[type="file"]:not(:empty) + .clear-button {
				display: inline-block;
			}

			div.html {
				text-align: left;
				color: var(--color-html-text);
				font-size: var(--font-size-input);
			}
			div.html h1, div.html h2, div.html h3, div.html h4, div.html h5, div.html h6, div.html p, div.html ul, div.html ol, div.html a {
				font-weight: 400;
				font-style: normal;
				margin-bottom: 8px;
			}
			div.html li {
				margin-bottom: 8px;
				margin-left: 24px;
			}
			div.html ul, div.html ol {
				font-size: var(--font-size-input);
				display: flex;
				flex-direction: column;
				align-self: stretch;
				line-height: normal;
			}
			div.html b {
				font-weight: 600;
			}
			div.html h1 {
				font-size: var(--font-size-html-h1);
				line-height: 35px;
			}
			div.html h2 {
				font-size: var(--font-size-html-h2);
				line-height: 26px;
			}
			div.html h3 {
				font-size: var(--font-size-html-h3);
				line-height: 24px;
			}
			div.html h4 {
				font-size: var(--font-size-html-h4);
				line-height: 18px;
			}
			div.html h5 {
				font-size: var(--font-size-html-h5);
			}
			div.html h6 {
				font-size: var(--font-size-html-h6);
			}
			div.html p {
				margin-bottom: 8px;
			}
			div.html a {
				color: var(--color-html-link);
				font-size: var(--font-size-input);
			}

			@media only screen and (max-width: 500px) {
				body {
					background-color: var(--color-background);
				}
				hr {
					display: block;
				}
				.container {
					width: 95%;
					min-height: 100vh;
					padding: 24px;
					border: 0px solid var(--color-input-border);
					border-radius: 0px;
					box-shadow: 0px 0px 0px 0px #ffffff;
				}
				.card {
					padding: 0px;
					background-color: var(--color-card-bg);
					border: 0px solid var(--color-input-border);
					border-radius: 0px;
					box-shadow: 0px 0px 0px 0px #ffffff;
					margin-bottom: 0px;
				}
			}
		</style>

	</head>

	<body>
		<div class='container'>
			<section>

				<form class='card' action='#' method='POST' name='n8n-form' id='n8n-form' novalidate>
					<div class='form-header'>
						<h1>تواصل معنا</h1>
						<p style="white-space: pre-line">سنرد على طلبك فورا </p>
					</div>

					<div class='inputs-wrapper'>






								<div class='form-group'>
									<label class='form-label ' for='field-0'>الاسم</label>
									<input
										class='form-input '
										type='text'
										id='field-0'
										name='field-0'
										value=""
										placeholder="محمد"
									/>
									<p class='error-field-0 error-hidden'>
										This field is required
									</p>
								</div>






								<div class='form-group'>
									<label class='form-label ' for='field-1'>البريد الالكتروني</label>
									<input
										class='form-input '
										type='email'
										id='field-1'
										name='field-1'
										value=""
										placeholder="اختياري للرد عليك"
									/>
									<p class='error-field-1 error-hidden'>
										This field is required
									</p>
								</div>

								<div class='form-group'>
									<label class='form-label ' for='field-2'>نوع الرسالة</label>
									<div class='select-input'>
										<select id='field-2' name='field-2' class=''>
												<option value='' disabled selected>Select an option ...</option>
													<option value='استفسار'>استفسار</option>
													<option value='اقتراح'>اقتراح</option>
													<option value='مشكلة/شكوى'>مشكلة/شكوى</option>
													<option value='اخرى'>اخرى</option>
										</select>
									</div>
									<p class='error-field-2 error-hidden'>
										This field is required
									</p>
								</div>









								<div class='form-group'>
									<label class='form-label form-required' for='field-3'>رسالتك</label>
									<textarea
										class='form-input form-required'
										id='field-3'
										name='field-3'
										placeholder="اكتب رسالتك هنا"
									></textarea>
									<p class='error-field-3 error-hidden'>
										This field is required
									</p>
								</div>



								<div class='form-group'>
									<label class='form-label ' for='field-4'>الحالة</label>
									<div class='select-input'>
										<select id='field-4' name='field-4' class=''>
												<option value='' disabled selected>Select an option ...</option>
													<option value='جديد'>جديد</option>
													<option value='قيد المعالجة'>قيد المعالجة</option>
													<option value='معالج'>معالج</option>
										</select>
									</div>
									<p class='error-field-4 error-hidden'>
										This field is required
									</p>
								</div>






								<div class='form-group'>
									<label class='form-label ' for='field-5'>الاولوية</label>
									<div class='select-input'>
										<select id='field-5' name='field-5' class=''>
												<option value='' disabled selected>Select an option ...</option>
													<option value='عادي'>عادي</option>
													<option value='متوسط'>متوسط</option>
													<option value='عاجل'>عاجل</option>
										</select>
									</div>
									<p class='error-field-5 error-hidden'>
										This field is required
									</p>
								</div>





					</div>

					<button id='submit-btn' type='submit'>
						<span><svg
								xmlns='http://www.w3.org/2000/svg'
								height='18px'
								viewBox='0 0 512 512'
							>
								<path
									d='M304 48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zm0 416a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM48 304a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm464-48a48 48 0 1 0 -96 0 48 48 0 1 0 96 0zM142.9 437A48 48 0 1 0 75 369.1 48 48 0 1 0 142.9 437zm0-294.2A48 48 0 1 0 75 75a48 48 0 1 0 67.9 67.9zM369.1 437A48 48 0 1 0 437 369.1 48 48 0 1 0 369.1 437z'
								/>
							</svg></span>
						Submit
					</button>
				</form>

				<div class='card' id='submitted-form' style='display: none;'>
					<div class='form-header'>
							<h1 id='submitted-header'>Form Submitted</h1>
							<p id='submitted-content'>
								Your response has been recorded
							</p>
					</div>
				</div>


				<input id="useResponseData" style="display: none;" value=false />
			</section>
		</div>
		<script>
			function updateError(errorElement, action = 'add', message = '') {
				if(action === 'add') {
					errorElement.textContent = message;
					errorElement.classList.add('error-show');
				} else {
					errorElement.classList.remove('error-show');
				}
			}

			function validateInput(input, errorElement) {
				const value = input.value.trim();
				const type = input.type;

				if (type === 'email' && value !== '') {
					return validateEmailInput(value, errorElement);
				} else if (type === 'number' && value !== '') {
					if (isNaN(value)) {
						updateError(errorElement, 'add', 'Enter only numbers in this field');
						return false;
					} else {
						updateError(errorElement, 'remove');
						return true;
					}
				} else if (value === '') {
					updateError(errorElement, 'add', 'This field is required');
					return false;
				} else {
					updateError(errorElement, 'remove');
					return true;
				}
			}

			function validateEmailInput(value, errorElement) {
				const regex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
				const isValidEmail = regex.test(value);

				if (!isValidEmail) {
					updateError(errorElement, 'add', 'Enter a valid email address in this field');
					return false;
				} else {
					errorElement.textContent = 'This field is required';
					updateError(errorElement, 'remove');
					return true;
				}
			}

			function getSelectedValues(input) {
				const selectedValues = [];
				const checkboxes = input.querySelectorAll('.multiselect-checkbox');

				checkboxes.forEach((checkbox, index) => {
					if (checkbox.checked) {
						selectedValues.push(checkbox.value.trim());
					}
				});

				return selectedValues;
			}

			function getDataValues(input) {
				const radio = input.dataset.radioSelect ? true : false;
				const exact = input.dataset.exactSelect ? parseInt(input.dataset.exactSelect, 10) : null;
				const maxSelect = input.dataset.maxSelect ? parseInt(input.dataset.maxSelect, 10) : null;
				const minSelect = input.dataset.minSelect ? parseInt(input.dataset.minSelect, 10) : null;
				return { radio, exact, maxSelect, minSelect };
			}

			function validateMultiselect(input, errorElement) {
				const values = getSelectedValues(input);
				const data = getDataValues(input);
				const required = input.classList.contains('form-required');

				if (required && !values.length) {
					updateError(errorElement, 'add', 'This field is required');
					return false;
				}

				if (data.exact && values.length !== data.exact) {
					const optionText = data.exact === 1 ? 'option' : 'options';
					updateError(errorElement, 'add', `You must select exactly ${data.exact} ${optionText}`);
					return false;
				}

				if (data.minSelect && values.length < data.minSelect) {
					const optionText = data.minSelect === 1 ? 'option' : 'options';
					updateError(errorElement, 'add', `You must select at least ${data.minSelect} ${optionText}`);
					return false;
				}

				if(data.maxSelect && values.length > data.maxSelect) {
					const optionText = data.maxSelect === 1 ? 'option' : 'options';
					updateError(errorElement, 'add', `You can select a maximum of ${data.maxSelect} ${optionText}`);
					return false;
				}

				updateError(errorElement, 'remove');
				return true;
			}

			const form = document.querySelector('#n8n-form');

			document.querySelectorAll("input[type=number]").forEach(function (element) {
				element.addEventListener("wheel", function(event) {
					if (document.activeElement === event.target) {
						event.preventDefault();
					}
				});
			});

			document.querySelectorAll('input[type="file"]').forEach(fileInput => {
				const clearButton = fileInput.nextElementSibling;
				let previousFiles = [];

				fileInput.addEventListener('change', () => {
					const files = fileInput.files;

					if (files.length > 0) {
						previousFiles = Array.from(files);
						clearButton.style.display = 'inline-block';
					} else {
						if (previousFiles.length > 0) {
							const dataTransfer = new DataTransfer();
							previousFiles.forEach(file => dataTransfer.items.add(file));
							fileInput.files = dataTransfer.files;
							clearButton.style.display = 'inline-block';
						}
					}
				});

				clearButton.addEventListener('click', (event) => {
					event.preventDefault();
					fileInput.value = '';
					previousFiles = [];
					clearButton.style.display = 'none';
				});
			});

			const requiredInputs = document.querySelectorAll('.form-required:not(label)');
			const emailInputs = document.querySelectorAll("input[type=email]");
			const multiselectInputs = document.querySelectorAll('.multiselect');

			multiselectInputs.forEach((input) => {
				const data = getDataValues(input);
				const errorElement = document.querySelector(`.error-${input.id}`);

				if (data.radio) {
					const checkboxes = input.querySelectorAll('.multiselect-checkbox');
					checkboxes.forEach((checkbox) => {
						checkbox.addEventListener('change', (event) => {
							if (event.target.checked) {
								checkboxes.forEach((cb) => {
									if (cb !== event.target) {
										cb.checked = false;
									}
								});
								updateError(errorElement, 'remove');
							}
						});
					});
				}

				input.addEventListener('click', () => {
					validateMultiselect(input, errorElement);
				});
			});

			requiredInputs.forEach((input) => {
				const errorSelector = `.error-${input.id}`;
				const error = document.querySelector(errorSelector);

				if (input.classList.contains('multiselect')) {
					input.addEventListener('click', () => {
						validateMultiselect(input, error);
					});
				} else {
					input.addEventListener('blur', () => {
						validateInput(input, error);
					});
					input.addEventListener('input', () => {
						updateError(error, 'remove');
					});
				}
			});

			emailInputs.forEach(function (input) {
				const errorSelector = `.error-${input.id}`;
				const error = document.querySelector(errorSelector);

				input.addEventListener("input", function(event) {
					const value = input.value.trim();
					if (value === "") {
						error.classList.remove('error-show');
					} else {
						validateEmailInput(value, error);
					}
				});
			});

			let interval = 1000;
			let timeoutId;
			let formWaitingUrl;

			const checkExecutionStatus = async () => {
				if (!interval) return;

				try {
					const response = await fetch(`${formWaitingUrl ?? window.location.href}/n8n-execution-status`);
					const text = (await response.text()).trim();

					if (text === "form-waiting") {
						window.location.replace(formWaitingUrl ?? window.location.href);
						return;
					}

					if (text === "success") {
						form.style.display = 'none';
						document.querySelector('#submitted-form').style.display = 'block';
						clearTimeout(timeoutId);
						return;
					}

					if (text === "null") {
						form.style.display = 'none';
						document.querySelector('#submitted-form').style.display = 'block';
						document.querySelector('#submitted-header').textContent = 'Could not get execution status';
						document.querySelector('#submitted-content').textContent =
							'Make sure "Save successful production executions" is enabled in your workflow settings';
						clearTimeout(timeoutId);
						return;
					}

					if(["canceled", "crashed", "error" ].includes(text)) {
						form.style.display = 'none';
						document.querySelector('#submitted-form').style.display = 'block';
						document.querySelector('#submitted-header').textContent = 'Problem submitting response';
						document.querySelector('#submitted-content').textContent =
							'Please try again or contact support if the problem persists';
						clearTimeout(timeoutId);
						return;
					}

					interval = Math.round(interval * 1.1);
					timeoutId = setTimeout(checkExecutionStatus, interval);
				} catch (error) {
					console.error("Error fetching data:", error);
				}
			};

			form.addEventListener('submit', (e) => {
				const valid = [];
				e.preventDefault();

				emailInputs.forEach(function (input) {
					const value = input.value.trim();
					if(value === '') {
						return;
					}
					const errorSelector = `.error-${input.id}`;
					const error = document.querySelector(errorSelector);
					valid.push(validateEmailInput(value, error));
				});

				[...requiredInputs, ...multiselectInputs].forEach((input) => {
					const errorSelector = `.error-${input.id}`;
					const error = document.querySelector(errorSelector);

					if (input.classList.contains('multiselect')) {
						valid.push(validateMultiselect(input, error));
					} else {
						valid.push(validateInput(input, error));
					}
				});

				if (valid.every((v) => v)) {
					var formData = new FormData();

					for (const filed of form.elements) {
						if(filed.type !== 'file') {
							formData.append(filed.name, filed.value);
						} else {
							for (const file of filed.files) {
								if(file.size === 0) {
									continue;
								}
								formData.append(filed.name, file);
							}
						}
					}
					document.querySelectorAll('.multiselect').forEach((multiselect) => {
 						const selectedValues = getSelectedValues(multiselect);
 						formData.append(multiselect.id, JSON.stringify(selectedValues));
 					});
					document.querySelector('#submit-btn').disabled = true;
					document.querySelector('#submit-btn').style.cursor = 'not-allowed';
					document.querySelector('#submit-btn span').style.display = 'inline-block';

					let postUrl = '';
					if (!window.location.href.includes('form-waiting')) {
						postUrl = window.location.search;
					}

					fetch(postUrl, {
						method: 'POST',
						body: formData,
					})
						.then(async function (response) {
							const useResponseData = document.getElementById("useResponseData").value;

							if (useResponseData === "true") {
								const text = await response.text();
								let json;

								try{
									json = JSON.parse(text);
								} catch (e) {}

								if(json?.formWaitingUrl) {
									formWaitingUrl = json.formWaitingUrl;
									clearTimeout(timeoutId);
									timeoutId = setTimeout(checkExecutionStatus, interval);
									return;
								}

								if (json?.redirectURL) {
									const url = json.redirectURL.includes("://") ? json.redirectURL : "https://" + json.redirectURL;
									window.location.replace(url);
									return;
								}

								if (json?.formSubmittedText) {
									form.style.display = 'none';
									document.querySelector('#submitted-form').style.display = 'block';
									document.querySelector('#submitted-content').textContent = json.formSubmittedText;
									return;
								}

								if (text) {
									document.body.innerHTML = text;
									return;
								}

								if (text === '') {
									// this is empty cleanup response from responsePromise
									// no need to keep checking execution status
									clearTimeout(timeoutId);
									interval = 0;
								}
							}

							if (response.status === 200) {
								if(response.redirected) {
									window.location.replace(response.url);
									return;
								}
								const redirectUrl = document.getElementById("redirectUrl");
								if (redirectUrl) {
									window.location.replace(redirectUrl.href);
								} else {
									form.style.display = 'none';
									document.querySelector('#submitted-form').style.display = 'block';
								}
							} else {
								form.style.display = 'none';
								document.querySelector('#submitted-form').style.display = 'block';
								document.querySelector('#submitted-header').textContent = 'Problem submitting response';
								document.querySelector('#submitted-content').textContent =
									'Please try again or contact support if the problem persists';
							}

							return;
						})
						.catch(function (error) {
							console.error('Error:', error);
						})
						.finally(() => {
							if (window.location.href.includes('form-waiting')) {
								clearTimeout(timeoutId);
								timeoutId = setTimeout(checkExecutionStatus, interval);
							}
						});
				}
			});
		</script>
	<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"286b308176cb4730a805099ff948887a","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>
</html>